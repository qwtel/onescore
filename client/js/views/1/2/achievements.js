// Generated by CoffeeScript 1.3.3

_.extend(Template.achievements, {
  events: {
    'click .more': function(e) {
      var skip;
      skip = Session.get('skip');
      skip++;
      return Session.set('skip', skip);
    }
  },
  select: function() {
    var sel;
    sel = {};
    sel.created = true;
    if (Session.get('category') != null) {
      sel.category = Session.get('category');
    }
    if (Session.get('tagFilter') != null) {
      Session.get('_tagFilter');
      sel.tags = {
        $all: Session.get('tagFilter')
      };
    }
    switch (Session.get('limit')) {
      case 'me':
        sel.user = Meteor.user()._id;
        break;
      case 'friends':
        sel.user = {
          $in: [Meteor.user()._id]
        };
    }
    return sel;
  },
  achievements: function() {
    var sel, sort;
    sort = Template.filter.sort();
    sel = Template.filter.select();
    sel.created = true;
    return Achievements.find(sel, {
      sort: sort
    });
  }
});
