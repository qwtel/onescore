// Generated by CoffeeScript 1.3.3

Meteor.publish('users', function() {
  return Meteor.users.find();
});

Meteor.publish('comments', function() {
  return Comments.find();
});

Meteor.publish('achievements', function() {
  return Achievements.find();
});

Meteor.publish('titles', function(entity) {
  return Titles.find({
    entity: entity
  });
});

Meteor.publish('votes', function() {
  return Votes.find();
});

Meteor.publish('favourites', function() {
  return Favourites.find();
});

Meteor.publish('accomplishments', function() {
  return Accomplishments.find();
});

Meteor.publish('notifications', function(batch) {
  return Notifications.find({
    receivers: this.userId()
  }, {
    sort: {
      date: -1
    },
    limit: 15 * (batch + 1)
  });
});

Meteor.publish('explore', function(sel, sort, batch) {
  var achievements;
  achievements = Achievements.find(sel, {
    sort: sort,
    limit: 5 * (batch + 1)
  });
  return achievements;
});

Meteor.publish('quests', function(user) {
  var favs;
  if (!user) {
    user = this.userId();
  }
  return favs = Favourites.find({
    user: user,
    active: true
  }, {
    sort: {
      date: -1
    },
    limit: 100
  });
});
